# Ansible Configuration for State-Driven Playbook Framework
# This configuration file sets up Ansible for optimal performance
# with the state machine framework

[defaults]
# Basic settings
inventory = ./inventory.yml
host_key_checking = False
timeout = 30
forks = 10
gathering = smart
fact_caching = jsonfile
fact_caching_connection = ./.ansible/tmp/ansible_facts_cache
fact_caching_timeout = 86400

# Output settings
stdout_callback = yaml
display_skipped_hosts = False
display_ok_hosts = True
show_custom_stats = True

# Performance settings
pipelining = True
control_path = ./.ansible/tmp/ansible-ssh-%%h-%%p-%%r
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no

# Logging
log_path = ./.ansible/tmp/ansible.log
verbosity = 0

# Roles and collections
roles_path = ./roles:./collections
collections_path = ./collections:~/.ansible/collections:/usr/share/ansible/collections

# State machine specific settings
[state_machine]
# Enable state machine features
enable_state_tracking = True
state_fact_directory = ./.ansible/facts.d
backup_enabled = True
backup_retention_days = 30

# Validation settings
strict_validation = True
require_explicit_transitions = True
allow_self_transitions = False

# Performance settings
state_detection_timeout = 30
transition_validation_timeout = 10
state_persistence_timeout = 15

[privilege_escalation]
# Become settings for state management
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
# SSH settings for reliable connections
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no
pipelining = True
control_path = ./.ansible/tmp/ansible-ssh-%%h-%%p-%%r
